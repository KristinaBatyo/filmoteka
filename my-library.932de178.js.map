{"mappings":"iiBACA,IAAAA,EAAAC,EAAA,S,wCAaA,EAAAD,EAAAE,eAVuB,CACrBC,OAAQ,0CACRC,WAAY,kCACZC,UAAW,kBACXC,cAAe,8BACfC,kBAAmB,eACnBC,MAAO,8CAOT,IAAMC,GAAK,EAAAC,EAAAC,gBAILC,GAAS,EAAAF,EAAAG,YAAWJ,EADX,UASTK,EAAWC,SAASC,cAAc,iBAIjC,SAASC,EAAgBC,IAC9B,EAAAR,EAAAS,SAAQP,GACPQ,MAAK,SAAAC,GACJ,IAAMC,EAAYD,EAASE,KAAK,GAAGC,OAG/BC,EAAkC,UAAdP,EACxBI,EAAUI,MAAMC,OAChBL,EAAUM,QAAQD,OAEZE,EAAa,IAAIC,EAAAC,GAAJ,CAAehB,SAASiB,eAAe,cAAe,CACvEC,WAAYR,EACZS,aAAc,GACdC,aAAc,EACdC,aAAa,IAGf,GAAIX,GAAqB,GAAI,OAAOI,EAAWQ,IAE/CR,EAAWS,GAAG,aAAa,SAAUC,GACnCC,EAAYD,EAAUE,KAAMvB,GAC5BwB,aAAaC,QAAQ,eAAgBd,EAAWe,iB,OAGnDC,OAAM,SAAAC,GACLC,QAAQC,IAAIF,EAAIG,Q,IAIb,SAAST,EAAYC,EAAMvB,IAEhC,EAAAR,EAAAS,SAAQP,GACPQ,MAAK,SAAAC,GACJ,IAAMC,EAAYD,EAASE,KAAK,GAAGC,OAC7BA,EAAqB,UAAdN,EACbI,EAAUI,MAAMwB,MAAa,GAAPT,EAAY,GAAW,GAAPA,GACtCnB,EAAUM,QAAQsB,MAAa,GAAPT,EAAY,GAAW,GAAPA,GACxC3B,EAASqC,UAAY,GACrBrC,EAASsC,mBAAmB,YAOhC,SAA6B5B,GAC3B,OAAOA,EACJ6B,KAAI,SAAAC,G,IAAGC,EAAED,EAAFC,GAAIC,EAAWF,EAAXE,YAAaC,EAAKH,EAALG,MAAOC,EAAMJ,EAANI,OAAQC,EAAYL,EAAZK,aAAcC,EAAYN,EAAZM,aACpD,MAAO,4CAG+BC,OAHaN,EAAG,wFAI/CM,OAD+BL,EAAY,kBAOhDK,OANKJ,EAAM,mNAUXI,OAJAJ,EAAM,uDAYFI,OARJH,EAAO/B,OAAS,EACZ+B,EACGR,MAAM,EAAG,GACTW,OAAO,CAAC,CAAEC,KAAM,WAChBT,KAAI,SAAAU,G,OAASA,EAAMD,I,IACnBE,KAAK,MACRN,EAAOL,KAAI,SAAAU,G,OAASA,EAAMD,I,IAAME,KAAK,MAC1C,gBAEuBH,OADlBF,EAAaT,MAAM,EAAG,GAAG,kCACiBW,OAAxBD,EAAaK,QAAQ,GAAG,6C,IAKjDD,KAAK,G,CAtCmCE,CAAoB1C,G,IAE9DqB,OAAM,SAAAC,GACLC,QAAQC,IAAIF,EAAIG,Q,KA3CpB,EAAAkB,EAAAC,oB,sBC1BA,IAAMC,EAAWtD,SAASC,cAAc,UAClCsD,EAAavD,SAASC,cAAc,YAE1CqD,EAASE,UAAUC,IAAI,iBACvBvD,EAAgB,SAChBuB,EAAY,EAAG,SAEf8B,EAAWG,iBAAiB,SAG5B,WACIH,EAAWC,UAAUC,IAAI,iBACzBH,EAASE,UAAUG,OAAO,iBAC1BzD,EAAgB,WAChBuB,EAAY,EAAG,U,IANnB6B,EAASI,iBAAiB,SAS1B,WACIJ,EAASE,UAAUC,IAAI,iBACvBF,EAAWC,UAAUG,OAAO,iBAC5BzD,EAAgB,SAChBuB,EAAY,EAAG,Q","sources":["src/js/my-library-render-storage.js","src/init-my-library.js"],"sourcesContent":["/////////////////////////Initialize Firebase//////////////////////////\nimport { initializeApp } from 'firebase/app';\nimport { getFirestore, collection, getDocs } from 'firebase/firestore';\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyD6Ady1jhuAgqwFL0qbhu5KyUIJdTFoZmc\",\n  authDomain: \"filmoteka-268b8.firebaseapp.com\",\n  projectId: \"filmoteka-268b8\",\n  storageBucket: \"filmoteka-268b8.appspot.com\",\n  messagingSenderId: \"661144848024\",\n  appId: \"1:661144848024:web:d78c5ac841ef43fb0472ed\"\n};\n\n// Initialize Firebase app\ninitializeApp(firebaseConfig);\n\n// init services\nconst db = getFirestore();\n\n// refs\nconst colId  = 'User01';\nconst colRef = collection(db, colId );\n\n//////////////////////////////////////////////////////////////////////\n\n\nimport Pagination from 'tui-pagination';\nimport { toggleLightTheme } from './day-night-theme';\n\nconst divQueue = document.querySelector('.movies__list');\n\ntoggleLightTheme();\n\nexport function myLibPagination(fieldName) {\n  getDocs(colRef)\n  .then(snapshot => {\n    const myLibList = snapshot.docs[0].data();\n    // if (!JSON.parse(localStorage.getItem(fieldName))) return;\n    // let queueTotalResults = JSON.parse(localStorage.getItem(fieldName)).length;\n    let queueTotalResults = fieldName === 'Queue'? \n    myLibList.Queue.length:\n    myLibList.Watched.length;\n\n    const pagination = new Pagination(document.getElementById('pagination'), {\n      totalItems: queueTotalResults,\n      itemsPerPage: 18,\n      visiblePages: 5,\n      centerAlign: true,\n    });\n\n    if (queueTotalResults <= 18) return pagination.off;\n\n    pagination.on('afterMove', function (eventData) {\n      myLibRender(eventData.page, fieldName);\n      localStorage.setItem('current_page', pagination.getCurrentPage());\n    });\n  })\n  .catch(err => {\n    console.log(err.message)\n  })\n}\n\nexport function myLibRender(page, fieldName) {\n\n  getDocs(colRef)\n  .then(snapshot => {\n    const myLibList = snapshot.docs[0].data();\n    const data = fieldName === 'Queue'? \n    myLibList.Queue.slice(page * 18 - 18, page * 18):\n    myLibList.Watched.slice(page * 18 - 18, page * 18);\n    divQueue.innerHTML = '';\n    divQueue.insertAdjacentHTML('beforeend', renderMarkupStorage(data));\n  })\n  .catch(err => {\n    console.log(err.message)\n  })\n}\n\nfunction renderMarkupStorage(data) {\n  return data\n    .map(({ id, poster_path, title, genres, release_date, vote_average }) => {\n      return `<div class='movie-card js-item' data-id='${id}'>\n    <img\n      class='movie-poster'\n      src='https://image.tmdb.org/t/p/w500${poster_path}'\n      alt='${title}'\n      onerror=\"this.onerror=null;this.src='https://sd.keepcalms.com/i-w600/keep-calm-poster-not-found.jpg';\"\n      loading='lazy'\n    />\n    <div class='info'>\n      <h2 class='movie-title'>\n      ${title}\n      </h2>\n      <p class='movie-info'>\n      ${\n        genres.length > 3\n          ? genres\n              .slice(0, 2)\n              .concat([{ name: 'Other' }])\n              .map(genre => genre.name)\n              .join(', ')\n          : genres.map(genre => genre.name).join(', ')\n      }\n        | ${release_date.slice(0, 4)}\n        <span class='vote'> ${vote_average.toFixed(1)} </span>\n      </p>\n    </div>\n  </div>`;\n    })\n    .join('');\n}\n","import { myLibPagination } from './js/my-library-render-storage';\nimport { myLibRender } from './js/my-library-render-storage';\nimport './js/modal-film';\nimport './js/day-night-theme';\n\nconst btnQueue = document.querySelector('.queue');\nconst btnWatched = document.querySelector('.watched');\n\nbtnQueue.classList.add('btn-is-active');\nmyLibPagination('Queue');\nmyLibRender(1, 'Queue');\n\nbtnWatched.addEventListener('click', onbtnWatchedClick)\nbtnQueue.addEventListener('click', onbtnQueueClick)\n\nfunction onbtnWatchedClick () {\n    btnWatched.classList.add('btn-is-active');\n    btnQueue.classList.remove('btn-is-active');\n    myLibPagination('Watched');\n    myLibRender(1, 'Watched');\n  }\n\nfunction onbtnQueueClick () {\n    btnQueue.classList.add('btn-is-active');\n    btnWatched.classList.remove('btn-is-active');\n    myLibPagination('Queue');\n    myLibRender(1, 'Queue');\n  }"],"names":["$6Urw1","parcelRequire","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","$7a4d46900937eee9$var$db","$88RRX","getFirestore","$7a4d46900937eee9$var$colRef","collection","$7a4d46900937eee9$var$divQueue","document","querySelector","$7a4d46900937eee9$export$427396420f21f8a5","fieldName","getDocs","then","snapshot","myLibList","docs","data","queueTotalResults","Queue","length","Watched","pagination","$parcel$interopDefault","$1VFfL","getElementById","totalItems","itemsPerPage","visiblePages","centerAlign","off","on","eventData","$7a4d46900937eee9$export$687dafcb619d224d","page","localStorage","setItem","getCurrentPage","catch","err","console","log","message","slice","innerHTML","insertAdjacentHTML","map","param","id","poster_path","title","genres","release_date","vote_average","concat","name","genre","join","toFixed","$7a4d46900937eee9$var$renderMarkupStorage","$2XwUb","toggleLightTheme","$08d0468c05d63a8a$var$btnQueue","$08d0468c05d63a8a$var$btnWatched","classList","add","addEventListener","remove"],"version":3,"file":"my-library.932de178.js.map"}